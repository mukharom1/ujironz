<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ronz CC - CapCut Creator</title>
<style>
  body { font-family: Arial; background: #f4f4f4; padding: 20px; }
  .container { max-width: 400px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
  input, button { width: 100%; padding: 10px; margin: 10px 0; font-size: 16px; }
  .result { background: #eef6ff; padding: 10px; margin-top: 20px; max-height: 300px; overflow-y: auto; font-family: monospace; white-space: pre-wrap; }
</style>
</head>
<body>
  <div class="container">
    <h1>Ronz CC - CapCut Creator</h1>
    <input type="text" id="password" placeholder="Password Akun" />
    <input type="text" id="countryCode" placeholder="Kode Negara Proxy (SG, FR)" maxlength="2" />
    <input type="number" id="totalAccount" placeholder="Jumlah Akun (max 10)" min="1" max="10" />
    <button id="createBtn">Buat Akun</button>
    <div id="status"></div>
    <div class="result" id="result" style="display:none;"></div>
  </div>

<script>
  const createBtn = document.getElementById('createBtn');
  const statusDiv = document.getElementById('status');
  const resultDiv = document.getElementById('result');

  createBtn.onclick = async () => {
    const password = document.getElementById('password').value.trim();
    const countryCode = document.getElementById('countryCode').value.trim().toUpperCase();
    const totalAccount = parseInt(document.getElementById('totalAccount').value.trim());

    if (!password || countryCode.length !== 2 || isNaN(totalAccount) || totalAccount < 1 || totalAccount > 10) {
      alert('Mohon isi semua field dengan benar dan jumlah akun max 10.');
      return;
    }

    createBtn.disabled = true;
    statusDiv.textContent = 'Memproses pembuatan akun, mohon tunggu...';
    resultDiv.style.display = 'none';
    resultDiv.textContent = '';

    try {
      const response = await fetch('http://localhost:3000/api/create-accounts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ password, countryCode, totalAccount })
      });
      if (!response.ok) throw new Error('Gagal koneksi ke server');
      const data = await response.json();

      if (data.accounts && data.accounts.length > 0) {
        let text = '';
        data.accounts.forEach((acc, i) => {
          text += `Akun #${i+1}\nEmail: ${acc.email}\nPassword: ${acc.password}\n\n`;
        });
        resultDiv.textContent = text;
        resultDiv.style.display = 'block';
        statusDiv.textContent = 'Selesai membuat akun.';
      } else {
        statusDiv.textContent = 'Tidak ada akun yang dibuat.';
      }
    } catch (e) {
      statusDiv.textContent = 'Error: ' + e.message;
    } finally {
      createBtn.disabled = false;
    }
  };
</script>
</body>
</html>

